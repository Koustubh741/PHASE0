# Production Environment Configuration for BFSI API
# Copy this file to .env and customize for your production environment

# Environment
ENVIRONMENT=production

# Server Configuration
HOST=0.0.0.0
PORT=8009
WORKERS=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100
TIMEOUT_KEEP_ALIVE=5
LIMIT_MAX_REQUESTS=10000
LIMIT_CONCURRENCY=1000

# Request Limits
LIMIT_REQUEST_LINE=4094
LIMIT_REQUEST_FIELDS=100
LIMIT_REQUEST_FIELD_SIZE=8190
LIMIT_REQUEST_BODY=10485760

# TLS/SSL Configuration (for direct TLS termination)
# SSL_KEYFILE=/etc/ssl/private/bfsi-api.key
# SSL_CERTFILE=/etc/ssl/certs/bfsi-api.crt
# SSL_CA_CERTS=/etc/ssl/certs/ca-bundle.crt
# SSL_CIPHERS=ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS
# SSL_MINIMUM_VERSION=TLSv1.2

# Logging
LOG_LEVEL=info
ACCESS_LOG=true
USE_COLORS=false

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=bfsi_production
DB_USER=bfsi_user
DB_PASSWORD=QE1Hie6-3p|O?,pvgr>q*5q*QZ:IrxJf
DB_SSL_MODE=require
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=Kx9#mP7$vL2@nQ8&wR5!tY3*uI6^eA4
REDIS_DB=0
REDIS_SSL=True

# Security Configuration
SECRET_KEY=-tI70hrxqV2AxKRir8iSWvS2AGunb8k0xELPXuy8j5zuhVCv0M_w0nVgF7rl1y1npgCJ59IrUIrEtXSorHDvLw==
JWT_SECRET_KEY=jNGzfk9EmevB6dG63Yh2hko8lBLuaYB3HOl_XM1XOHK9jpQRC-vIwMprTucMm4o8Y-vpjsgQklAY3_lpaAPwIQ==
ENCRYPTION_KEY=wlSYrr1gKy/en7PzaMXYaRWoFKUJXwiXDC6Ghd65xCA=
API_KEY_MASTER=6qfleKHI8KULieTZzbrAysgSpIwjCaPe

# Security Settings
DATA_ENCRYPTION_ENABLED=true
AUDIT_LOG_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
SESSION_TIMEOUT_MINUTES=30
DATA_RETENTION_DAYS=2555

# Compliance Settings
PCI_DSS_ENABLED=true
GDPR_ENABLED=true
DATA_ANONYMIZATION=true
CONSENT_TRACKING=true

# CORS Configuration (restrict to your domains)
CORS_ORIGINS=https://yourdomain.com,https://api.yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Authorization,Content-Type,X-Requested-With,X-API-Key

# Monitoring and Alerting
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=true
GRAFANA_PORT=3000

# External Services - Email Configuration
# Set EMAIL_ENABLED=false to disable email functionality
EMAIL_ENABLED=true

# Option 1: Custom SMTP Server (replace with your actual SMTP server details)
# SMTP_HOST=smtp.yourdomain.com
# SMTP_PORT=587
# SMTP_USER=noreply@yourdomain.com
# SMTP_PASSWORD=your_secure_password_here
# SMTP_TLS=true
# SMTP_SSL=false

# Option 2: SendGrid (recommended for production)
# SENDGRID_API_KEY=your_sendgrid_api_key_here
# SENDGRID_FROM_EMAIL=noreply@yourdomain.com
# SENDGRID_FROM_NAME=BFSI System

# Option 3: AWS SES (recommended for AWS environments)
# AWS_SES_REGION=us-east-1
# AWS_SES_ACCESS_KEY_ID=your_aws_access_key
# AWS_SES_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_SES_FROM_EMAIL=noreply@yourdomain.com

# Option 4: Gmail SMTP (for development/testing only)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-gmail@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_TLS=true

# Default configuration (DISABLE IN PRODUCTION - replace with actual values)
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=CHANGE_THIS_PASSWORD_IN_PRODUCTION
SMTP_TLS=true

# Email Security and Reliability Settings
SMTP_TIMEOUT=30
SMTP_RETRY_ATTEMPTS=3
SMTP_RETRY_DELAY=5
SMTP_CONNECTION_POOL_SIZE=10
SMTP_MAX_CONNECTIONS=20

# Email Templates and Branding
EMAIL_TEMPLATE_DIR=/app/templates/email
EMAIL_DEFAULT_FROM_NAME=BFSI System
EMAIL_DEFAULT_REPLY_TO=support@yourdomain.com

# Email Rate Limiting
EMAIL_RATE_LIMIT_PER_HOUR=100
EMAIL_RATE_LIMIT_PER_DAY=1000
EMAIL_BURST_LIMIT=10

# Email Monitoring and Logging
EMAIL_LOG_LEVEL=info
EMAIL_AUDIT_ENABLED=true
EMAIL_DELIVERY_TRACKING=true
EMAIL_BOUNCE_HANDLING=true

# Secrets Management Integration
# Use environment variables or secrets management for sensitive data:
# export SMTP_PASSWORD=$(aws secretsmanager get-secret-value --secret-id smtp-password --query SecretString --output text)
# export SENDGRID_API_KEY=$(aws secretsmanager get-secret-value --secret-id sendgrid-api-key --query SecretString --output text)

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=bfsi-production-backups-2024
BACKUP_S3_REGION=us-east-1
BACKUP_S3_ENCRYPTION=true
BACKUP_S3_KMS_KEY_ID=alias/bfsi-backup-key
BACKUP_S3_CROSS_REGION_REPLICATION=true
BACKUP_S3_REPLICATION_REGION=us-west-2

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Performance Tuning
WORKER_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=15
SEND_TIMEOUT=30
READ_TIMEOUT=30

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
CONTENT_SECURITY_POLICY="default-src 'self'; script-src 'self' 'nonce-{NONCE}'; style-src 'self' 'nonce-{NONCE}'; img-src 'self' data:; font-src 'self'; connect-src 'self' ws: wss:; frame-ancestors 'none'; base-uri 'self'; form-action 'self'"
REFERRER_POLICY=strict-origin-when-cross-origin
PERMISSIONS_POLICY="geolocation=(), microphone=(), camera=()"

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis
RATE_LIMIT_STRATEGY=fixed-window
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# API Versioning
API_VERSION=v2
API_PREFIX=/api/v2
DOCS_URL=/docs
REDOC_URL=/redoc

# Feature Flags
FEATURE_WEBSOCKET_ENABLED=true
FEATURE_REAL_TIME_PROCESSING=true
FEATURE_COMPLIANCE_CHECKS=true
FEATURE_RISK_ASSESSMENT=true
FEATURE_AUDIT_LOGGING=true
